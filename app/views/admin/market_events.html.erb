
<% content_for :page_wrapper do %>
<style>
	.well{background-color:#241010;color:white;}
	.alert{text-align: center;margin: 3%; font-family: monospace;}
	input{background-color:rgba(239, 234, 180, 0.63); }

</style>
	<div class="jumbotron" >
			<header class="container" >
				<button type="button" class="btn btn-info" id="newEveBtn" style="float:left;" >New</button>
				<button type="button" class="btn btn-info" id="editEveBtn" style="float:right;" >Edit</button>
			</header> 
			
			<% if flash[:queryStatus] %>
				<div class="alert alert-success"><%= flash[:queryStatus] %></div>
			<% end %>
			<% if flash[:Error] %>
				<div class="alert alert-warning"><%= flash[:Error] %></div>
			<% end %>

			<!-- create new events -->

			<div id="newEve" style="display:none;margin:4%;" >	
				<div class="well"  >Add new market events</div>
				<%= form_for @market_event,:html=>{:class => "form-vertical",:role=>"form",:method=>"get"} , url:{action: "market_events"} do |f| %>
				<%= render 'shared/error_messages', object: @market_event %>
				
				<div class="form-group">	
					<div class="col-sm-4">
						<span class="input-group-addon">Stock ID</span>
						<%= f.text_field :stock_id %>
					</div>
				</div>
				<div class="form-group">	
					<div class="col-sm-4">
						<span class="input-group-addon">EventName</span>
						<%= f.text_field :eventname %>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-4">
						<span class="input-group-addon">EventType</span>
						<%= f.text_field :event_type %>
					</div>
				</div>
				<div class="form-group">	
					
					<div class="col-sm-4">
						<span class="input-group-addon">EventTurn</span>
						<%= f.text_field :event_turn %>
					</div>
				</div>
				<div class="form-group">	
					<div class="col-sm-4">
						<span class="input-group-addon">Event</span>
						<%= f.text_field :event %>
					</div>
				</div>
				<div class="form-group">	
					
					<div class="col-sm-4">
						<span class="input-group-addon">EventDone</span>
						<%= f.text_field :event_done %>
					</div>
				</div>
					<%=	hidden_field_tag :token, '1' %>
				
				<%= f.submit "Go", class: "btn btn-medium btn-success center-block",style:"position:relative;top:15px;" %>
				<% end %>

			</div>
			
			<!-- edit events -->
			
			<div id="editEve" style="display:none;margin:4%;" >	
				<div class="well" >Edit existing market events</div>
				<%= form_for @market_event,:html=>{:class => "form-vertical",:role=>"form",:method=>"get"} , url:{action: "market_events"} do |f| %>
				<%= render 'shared/error_messages', object: @market_event %>
				
				<div class="form-group">	
					<div class="col-sm-4">
						<span class="input-group-addon">StockID</span>
						<%= f.text_field :stock_id %>
					</div>
				</div>
				<div class="form-group">	
					<div class="col-sm-4">
						<span class="input-group-addon">EventName</span>
						<%= f.text_field :eventname %>
					</div>
				</div>
				<div class="form-group">
					
					<div class="col-sm-4">
						<span class="input-group-addon">EventType</span>
						<%= f.text_field :event_type %>
					</div>
				</div>
				<div class="form-group">	
					
					<div class="col-sm-4">
						<span class="input-group-addon">EventTurn</span>
						<%= f.text_field :event_turn %>
					</div>
				</div>
				<div class="form-group">	
					<div class="col-sm-4">
						<span class="input-group-addon">Event</span>
						<%= f.text_field :event %>
					</div>
				</div>
				<div class="form-group">	
					
					<div class="col-sm-4">
						<span class="input-group-addon">EventDone</span>
						<%= f.text_field :event_done %>
					</div>
				</div>
				
					<%=	hidden_field_tag :token, '0' %>
				<%= f.submit "Go", class: "btn btn-medium btn-success center-block",style:"position:relative;top:15px;" %>
				<% end %>

			</div>
			
			<div style="margin:4%;" id="showEve" >
					<% if @allEvent.class== String %>
						<div class="alert alert-warning"><%= @allEvent %></div>
					<% else %>
						<%= will_paginate @allEvent %>

						<% eventList=["Stock ID","Event Name","Event Type","Event turn","Event","Event Done","Current Price",] %>	
						<table class="table table-hover table-condensed table-bordered" > 
							<thead>
								<tr>
									<% (0..6).each do |i| %>
										<th> <%= eventList[i] %> </th>
									<% end %>
								</tr>
							</thead>
							<tbody>
								<% @allEvent.each do |f| %>
									<tr>	
										<td><%= f.stock_id %></td>
										<td><%= f.eventname %></td>
										<td><%= f.event_type %></td>
										<td><%= f.event_turn %></td>
										<td><%= f.event %></td>
										<td><%= f.event_done %></td>
										<td>	<% @stock.each do |s| %>
													<% if s.id == f.stock_id %>
														<%= s.currentprice  %>
													<% end %>
												<% end %>
										</td>	
										<td>
										<form method="get" >
								           	<%=	hidden_field_tag :stk, f.stock_id %>
											<%= submit_tag "Remove", class: "btn btn-sm btn-danger",data: { confirm: "Are you sure?"},style:"width:100%;background-color:rgb(249, 53, 53);" %>
											</form>
										</td>

										
									</tr>
								<% end %>
							</tbody>
						</table>
						<%= will_paginate @allEvent %>
					<% end %>	

			</div>
	</div>
<% end %>

<% content_for :script do %>
	<script type="text/javascript" >
		$(document).ready(function(){
	    $("#newEveBtn").click(function(){
	    $("#newEve").animate({
	      height:'toggle'
	    });
	    });

	    $("#editEveBtn").click(function(){
	    $("#editEve").animate({
	      height:'toggle'
	    });
	    });

	    });

	</script>
<%end%>